<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>New-ProvVM - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "New-ProvVM";
    var mkdocs_page_input_path = "MachineCreation/New-ProvVM.md";
    var mkdocs_page_url = "/MachineCreation/New-ProvVM/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#syntax">Syntax</a></li>
        
    
        <li class="main "><a href="#detailed-description">Detailed Description</a></li>
        
    
        <li class="main "><a href="#related-commands">Related Commands</a></li>
        
    
        <li class="main "><a href="#parameters">Parameters</a></li>
        
    
        <li class="main "><a href="#input-type">Input Type</a></li>
        
    
        <li class="main "><a href="#return-values">Return Values</a></li>
        
            <li><a href="#systemguid-when-the-runasynchronously-identifier-is-specified-this-guid-is-returned-and-provides-the-task-identifiersystemmanagementautomationpscustomobject-this-object-provides-details-of-the-task-that-was-run-and-contains-the-following-information-taskid-the-identifier-for-the-task-that-was-performed-active-indicates-whether-the-task-is-still-processing-or-is-complete-host-the-name-of-the-host-on-which-the-task-is-running-or-was-run-datestarted-the-date-and-time-that-the-task-was-initiated-type-the-type-of-task-for-newly-provisioned-vm-tasks-this-is-always-newvirtualmachine-metadata-the-list-of-metadata-stored-against-the-task-for-new-tasks-this-is-empty-until-metadata-is-added-workflowstatus-indicates-the-status-of-the-workflow-that-is-used-to-process-the-task-provisioningschemename-the-name-of-the-provisioning-scheme-that-the-task-was-for-provisioningschemeuid-the-unique-identifier-of-the-provisioning-scheme-that-the-task-was-for-masterimage-the-path-in-the-hosting-unit-provider-of-the-virtual-machine-snapshot-that-was-used-as-the-master-image-for-the-task-identitypoolname-the-name-of-the-identity-pool-from-the-adidentity-powershell-snap-in-that-the-new-provisioning-scheme-uses-identitypooluid-the-unique-identifier-name-of-the-identity-pool-from-the-adidentity-powershell-snap-in-that-the-new-provisioning-scheme-uses-hostingunitname-the-name-of-the-hosting-unit-from-the-hosting-unit-powershell-snap-in-that-the-new-provisioning-scheme-uses-hostingunituid-the-unique-identifier-of-the-hosting-unit-from-the-hosting-unit-powershell-snap-in-that-the-new-provisioning-scheme-uses-taskstate-the-state-of-the-task-this-can-be-any-of-the-following-processing-indicates-that-the-task-is-in-its-initial-state-locatingresources-indicates-that-the-task-is-locating-information-from-other-services-hostingunitnotfound-indicates-that-the-required-hosting-unit-could-not-be-located-provisioningschemenotfound-indicates-that-the-required-provisioning-scheme-could-not-be-located-provisioning-indicates-that-the-task-is-at-the-provisioning-stage-identitypoolnotfound-indicates-that-the-required-identity-pool-could-not-be-located-taskalreadyrunningforprovisioningscheme-indicates-that-the-provisioning-scheme-already-has-another-task-running-hypervisorinmaintenancemode-indicates-that-the-hypervisor-is-not-available-for-normal-use-noavailablestorage-indicates-that-no-storage-is-available-for-the-hypervisor-noavailablenetwork-indicates-that-no-network-is-available-for-the-hypervisor-finalizing-indicates-that-the-task-is-finalizing-finished-indicates-that-the-task-is-complete-finishedwitherrors-indicates-that-the-task-is-complete-but-there-were-errors-specific-details-of-errors-are-included-with-each-failed-virtual-machine-removing-indicates-that-the-task-is-removing-virtual-machines-from-the-hypervisor-failed-the-job-failed-for-reasons-specified-in-taskstateinformation-canceled-indicates-that-the-task-was-stopped-by-user-intervention-using-stop-provtask-taskstateinformation-provides-more-detailed-information-about-the-current-task-state-virtualmachinestocreatecount-the-total-number-of-virtual-machines-that-the-task-is-trying-to-create-virtualmachinescreatedcount-the-number-of-virtual-machines-that-the-task-has-created-so-far-details-of-the-machines-that-were-created-are-in-the-createdvirtualmachines-parameter-virtualmachinescreationfailedcount-the-number-of-virtual-machines-that-the-task-has-failed-to-create-details-of-the-machines-that-were-not-created-are-in-the-failedvirtualmachines-parameter-failedvirtualmachines-adaccountname-the-domain-qualified-ad-account-name-of-the-machine-adaccountsid-the-ad-account-sid-of-the-machine-account-diagnosticinformation-a-collection-of-handled-error-states-which-caused-the-provisioning-to-fail-exceptiontype-the-type-of-exception-this-object-represents-message-the-exception-message-details-the-full-exception-content-including-stack-trace-innerexception-information-relating-to-any-contributing-error-state-status-statusadditionalinformation-vmid-the-virtual-machine-identifier-within-the-hypervisor-in-which-the-vm-resides-vmname-the-display-name-of-the-virtual-machine-within-the-hypervisor-in-which-the-vm-resides-createdvirtualmachines-see-failedvirtualmachines-for-details-of-the-object-parameters">System.Guid    When the RunAsynchronously identifier is specified, this GUID is returned and provides the task identifier.System.Management.Automation.PSCustomObject    This object provides details of the task that was run and contains the following information:        TaskId             The identifier for the task that was performed.        Active             Indicates whether the task is still processing or is complete.        Host             The name of the host on which the task is running or was run.        DateStarted             The date and time that the task was initiated.        Type             The type of task. For newly provisioned VM tasks, this is always "NewVirtualMachine".        Metadata             The list of metadata stored against the task. For new tasks this is empty until metadata is added.        WorkflowStatus             Indicates the status of the workflow that is used to process the task.        ProvisioningSchemeName             The name of the provisioning scheme that the task was for.        ProvisioningSchemeUid             The unique identifier of the provisioning scheme that the task was for.        MasterImage             The path (in the hosting unit provider) of the virtual machine snapshot that was used as the master image for the task.        IdentityPoolName             The name of the identity pool (from the ADIdentity PowerShell snap-in) that the new provisioning scheme uses.        IdentityPoolUid             The unique identifier name of the identity pool (from the ADIdentity PowerShell snap-in) that the new provisioning scheme uses.        HostingUnitName             The name of the hosting unit (from the Hosting Unit PowerShell snap-in) that the new provisioning scheme uses.        HostingUnitUid            The unique identifier of the hosting unit (from the Hosting Unit PowerShell snap-in) that the new provisioning scheme uses.        TaskState             The state of the task.  This can be any of the following:            Processing                Indicates that the task is in its initial state.            LocatingResources,                Indicates that the task is locating information from other services.            HostingUnitNotFound                Indicates that the required hosting unit could not be located.            ProvisioningSchemeNotFound                Indicates that the required provisioning scheme could not be located.            Provisioning                Indicates that the task is at the provisioning stage.            IdentityPoolNotFound                Indicates that the required identity pool could not be located.            TaskAlreadyRunningForProvisioningScheme                Indicates that the provisioning scheme already has another task running.            HypervisorInMaintenanceMode                Indicates that the hypervisor is not available for normal use.            NoAvailableStorage                Indicates that no storage is available for the hypervisor.            NoAvailableNetwork                Indicates that no network is available for the hypervisor.            Finalizing                Indicates that the task is finalizing.            Finished                Indicates that the task is complete.            FinishedWithErrors                Indicates that the task is complete but there were errors. Specific details of errors are included with each failed virtual machine.            Removing                Indicates that the task is removing virtual machines from the hypervisor.            Failed                The job failed for reasons specified in TaskStateInformation.            Canceled                Indicates that the task was stopped by user intervention (using Stop-ProvTask).        TaskStateInformation            Provides more detailed information about the current task state.        VirtualMachinesToCreateCount             The total number of virtual machines that the task is trying to create.        VirtualMachinesCreatedCount             The number of virtual machines that the task has created so far. Details of the machines that were created are in the CreatedVirtualMachines parameter.        VirtualMachinesCreationFailedCount             The number of virtual machines that the task has failed to create. Details of the machines that were not created are in the FailedVirtualMachines parameter.        FailedVirtualMachines             ADAccountName                 The domain qualified AD Account name of the machine.            ADAccountSid                 The AD account SID of the machine account.            DiagnosticInformation                 A collection of handled error states which caused the provisioning to fail.                    ExceptionType                       The type of exception this object represents                    Message                        The exception message                    Details                        The full exception content including stack trace                    InnerException                       Information relating to any contributing error state            Status             StatusAdditionalInformation             VMId                 The virtual machine identifier within the hypervisor in which the VM resides.            VMName                 The display name of the virtual machine within the hypervisor in which the VM resides.        CreatedVirtualMachines             See FailedVirtualMachines for details of the object parameters.</a></li>
        
    
        <li class="main "><a href="#examples">Examples</a></li>
        
            <li><a href="#example-1">EXAMPLE 1</a></li>
        
            <li><a href="#example-2">EXAMPLE 2</a></li>
        
            <li><a href="#example-3">EXAMPLE 3</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>MachineCreation &raquo;</li>
        
      
    
    <li>New-ProvVM</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>ï»¿# New-ProvVM</p>
<p>Creates a new virtual machine.</p>
<h2 id="syntax"><a class="toclink" href="#syntax">Syntax</a></h2>
<div class="codehilite"><pre><span></span>New-ProvVM -ProvisioningSchemeName &lt;String&gt; -ADAccountName &lt;String[]&gt; [-FastBuild] [-NetworkMapping &lt;Hashtable&gt;] [-AutoAssignVLAN] [-SecurityGroup &lt;String[]&gt;] [-MachinesPerAssistant &lt;Int32&gt;] [-MaxAssistants &lt;Int32&gt;] [-RunAsynchronously] [-PurgeJobOnSuccess] [-LoggingId &lt;Guid&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]

New-ProvVM -ProvisioningSchemeUid &lt;Guid&gt; -ADAccountName &lt;String[]&gt; [-FastBuild] [-NetworkMapping &lt;Hashtable&gt;] [-AutoAssignVLAN] [-SecurityGroup &lt;String[]&gt;] [-MachinesPerAssistant &lt;Int32&gt;] [-MaxAssistants &lt;Int32&gt;] [-RunAsynchronously] [-PurgeJobOnSuccess] [-LoggingId &lt;Guid&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]
</pre></div>


<h2 id="detailed-description"><a class="toclink" href="#detailed-description">Detailed Description</a></h2>
<p>Lets you create new virtual machines with the configuration specified by a provisioning scheme.</p>
<p>The virtual machines are created using all of the storage specified in the provisioning scheme. The storage is used in a round robin mechanism. For the duration of this task, the AD accounts are locked (by the AD Identity Service), which stops the same accounts being used by other virtual machine creation tasks.</p>
<h2 id="related-commands"><a class="toclink" href="#related-commands">Related Commands</a></h2>
<ul>
<li><a href="../Get-ProvVM.html">Get-ProvVM</a></li>
<li><a href="../Remove-ProvVM.html">Remove-ProvVM</a></li>
<li><a href="../Lock-ProvVM.html">Lock-ProvVM</a></li>
<li><a href="../Unlock-ProvVM.html">Unlock-ProvVM</a></li>
</ul>
<h2 id="parameters"><a class="toclink" href="#parameters">Parameters</a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Required?</th>
<th>Pipeline Input</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>ProvisioningSchemeName</td>
<td>The name of the provisioning scheme in which the virtual machines are created.</td>
<td>true</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>ProvisioningSchemeUid</td>
<td>The unique identifier for the provisioning scheme in which the virtual machines are created.</td>
<td>true</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>ADAccountName</td>
<td>A list of the Active Directory account names that are used for the virtual machines. The accounts must be provided in a domain-qualified format. This parameter accepts Identity objects as returned by the New-AcctADAccount cmdlet, or any PSObject with string properties "Domain" and "ADAccountName".</td>
<td>true</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>FastBuild</td>
<td>Indicates whether or not the command can improve speed by using optimizations in the creation process. This may mean that machines you create cannot be booted until ResetVM operations have been performed by the Broker and Machine Identity Services.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>NetworkMapping</td>
<td>Specifies how the attached NICs are mapped to networks. If this parameter is omitted, provisioned VMs are created with network settings as inherited from the provisioning scheme. If this parameter is supplied, machines are created with the number of NICs specified in the map, and each NIC is attached to the specified network.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>AutoAssignVLAN</td>
<td>Indicates whether or not the VLAN of the network should be automatically assigned to the new VM or if the VLAN from the master image should be used</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>SecurityGroup</td>
<td>The security groups to apply to machines created in Cloud Hypervisors</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>MachinesPerAssistant</td>
<td>The number of concurrent volume operations that may be performed by each volume worker helper machine</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>MaxAssistants</td>
<td>The maximum number of volume worker help machines that may be created for this operation.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>RunAsynchronously</td>
<td>Indicates whether or not the command returns before it is complete. If specified, the command returns an identifier for the task that was created. This task can be monitored using the get-ProvTask command.</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>PurgeJobOnSuccess</td>
<td>Indicates that the task history is removed from the database when the task has finished. This cannot be specified for tasks that are run asynchronously.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>LoggingId</td>
<td>Specifies the identifier of the high-level operation this cmdlet call forms a part of. Citrix Studio and Director typically create high-level operations. PowerShell scripts can also wrap a series of cmdlet calls in a high-level operation by way of the Start-LogHighLevelOperation and Stop-LogHighLevelOperation cmdlets.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>AdminAddress</td>
<td>Specifies the address of a XenDesktop controller to which the PowerShell snap-in connects. You can provide this as a host name or an IP address.</td>
<td>false</td>
<td>false</td>
<td>LocalHost. Once a value is provided by any cmdlet, this value becomes the default.</td>
</tr>
</tbody>
</table>
<h2 id="input-type"><a class="toclink" href="#input-type">Input Type</a></h2>
<h3 id="_1"><a class="toclink" href="#_1"></a></h3>
<h2 id="return-values"><a class="toclink" href="#return-values">Return Values</a></h2>
<h3 id="systemguid-when-the-runasynchronously-identifier-is-specified-this-guid-is-returned-and-provides-the-task-identifiersystemmanagementautomationpscustomobject-this-object-provides-details-of-the-task-that-was-run-and-contains-the-following-information-taskid-the-identifier-for-the-task-that-was-performed-active-indicates-whether-the-task-is-still-processing-or-is-complete-host-the-name-of-the-host-on-which-the-task-is-running-or-was-run-datestarted-the-date-and-time-that-the-task-was-initiated-type-the-type-of-task-for-newly-provisioned-vm-tasks-this-is-always-newvirtualmachine-metadata-the-list-of-metadata-stored-against-the-task-for-new-tasks-this-is-empty-until-metadata-is-added-workflowstatus-indicates-the-status-of-the-workflow-that-is-used-to-process-the-task-provisioningschemename-the-name-of-the-provisioning-scheme-that-the-task-was-for-provisioningschemeuid-the-unique-identifier-of-the-provisioning-scheme-that-the-task-was-for-masterimage-the-path-in-the-hosting-unit-provider-of-the-virtual-machine-snapshot-that-was-used-as-the-master-image-for-the-task-identitypoolname-the-name-of-the-identity-pool-from-the-adidentity-powershell-snap-in-that-the-new-provisioning-scheme-uses-identitypooluid-the-unique-identifier-name-of-the-identity-pool-from-the-adidentity-powershell-snap-in-that-the-new-provisioning-scheme-uses-hostingunitname-the-name-of-the-hosting-unit-from-the-hosting-unit-powershell-snap-in-that-the-new-provisioning-scheme-uses-hostingunituid-the-unique-identifier-of-the-hosting-unit-from-the-hosting-unit-powershell-snap-in-that-the-new-provisioning-scheme-uses-taskstate-the-state-of-the-task-this-can-be-any-of-the-following-processing-indicates-that-the-task-is-in-its-initial-state-locatingresources-indicates-that-the-task-is-locating-information-from-other-services-hostingunitnotfound-indicates-that-the-required-hosting-unit-could-not-be-located-provisioningschemenotfound-indicates-that-the-required-provisioning-scheme-could-not-be-located-provisioning-indicates-that-the-task-is-at-the-provisioning-stage-identitypoolnotfound-indicates-that-the-required-identity-pool-could-not-be-located-taskalreadyrunningforprovisioningscheme-indicates-that-the-provisioning-scheme-already-has-another-task-running-hypervisorinmaintenancemode-indicates-that-the-hypervisor-is-not-available-for-normal-use-noavailablestorage-indicates-that-no-storage-is-available-for-the-hypervisor-noavailablenetwork-indicates-that-no-network-is-available-for-the-hypervisor-finalizing-indicates-that-the-task-is-finalizing-finished-indicates-that-the-task-is-complete-finishedwitherrors-indicates-that-the-task-is-complete-but-there-were-errors-specific-details-of-errors-are-included-with-each-failed-virtual-machine-removing-indicates-that-the-task-is-removing-virtual-machines-from-the-hypervisor-failed-the-job-failed-for-reasons-specified-in-taskstateinformation-canceled-indicates-that-the-task-was-stopped-by-user-intervention-using-stop-provtask-taskstateinformation-provides-more-detailed-information-about-the-current-task-state-virtualmachinestocreatecount-the-total-number-of-virtual-machines-that-the-task-is-trying-to-create-virtualmachinescreatedcount-the-number-of-virtual-machines-that-the-task-has-created-so-far-details-of-the-machines-that-were-created-are-in-the-createdvirtualmachines-parameter-virtualmachinescreationfailedcount-the-number-of-virtual-machines-that-the-task-has-failed-to-create-details-of-the-machines-that-were-not-created-are-in-the-failedvirtualmachines-parameter-failedvirtualmachines-adaccountname-the-domain-qualified-ad-account-name-of-the-machine-adaccountsid-the-ad-account-sid-of-the-machine-account-diagnosticinformation-a-collection-of-handled-error-states-which-caused-the-provisioning-to-fail-exceptiontype-the-type-of-exception-this-object-represents-message-the-exception-message-details-the-full-exception-content-including-stack-trace-innerexception-information-relating-to-any-contributing-error-state-status-statusadditionalinformation-vmid-the-virtual-machine-identifier-within-the-hypervisor-in-which-the-vm-resides-vmname-the-display-name-of-the-virtual-machine-within-the-hypervisor-in-which-the-vm-resides-createdvirtualmachines-see-failedvirtualmachines-for-details-of-the-object-parameters"><a class="toclink" href="#systemguid-when-the-runasynchronously-identifier-is-specified-this-guid-is-returned-and-provides-the-task-identifiersystemmanagementautomationpscustomobject-this-object-provides-details-of-the-task-that-was-run-and-contains-the-following-information-taskid-the-identifier-for-the-task-that-was-performed-active-indicates-whether-the-task-is-still-processing-or-is-complete-host-the-name-of-the-host-on-which-the-task-is-running-or-was-run-datestarted-the-date-and-time-that-the-task-was-initiated-type-the-type-of-task-for-newly-provisioned-vm-tasks-this-is-always-newvirtualmachine-metadata-the-list-of-metadata-stored-against-the-task-for-new-tasks-this-is-empty-until-metadata-is-added-workflowstatus-indicates-the-status-of-the-workflow-that-is-used-to-process-the-task-provisioningschemename-the-name-of-the-provisioning-scheme-that-the-task-was-for-provisioningschemeuid-the-unique-identifier-of-the-provisioning-scheme-that-the-task-was-for-masterimage-the-path-in-the-hosting-unit-provider-of-the-virtual-machine-snapshot-that-was-used-as-the-master-image-for-the-task-identitypoolname-the-name-of-the-identity-pool-from-the-adidentity-powershell-snap-in-that-the-new-provisioning-scheme-uses-identitypooluid-the-unique-identifier-name-of-the-identity-pool-from-the-adidentity-powershell-snap-in-that-the-new-provisioning-scheme-uses-hostingunitname-the-name-of-the-hosting-unit-from-the-hosting-unit-powershell-snap-in-that-the-new-provisioning-scheme-uses-hostingunituid-the-unique-identifier-of-the-hosting-unit-from-the-hosting-unit-powershell-snap-in-that-the-new-provisioning-scheme-uses-taskstate-the-state-of-the-task-this-can-be-any-of-the-following-processing-indicates-that-the-task-is-in-its-initial-state-locatingresources-indicates-that-the-task-is-locating-information-from-other-services-hostingunitnotfound-indicates-that-the-required-hosting-unit-could-not-be-located-provisioningschemenotfound-indicates-that-the-required-provisioning-scheme-could-not-be-located-provisioning-indicates-that-the-task-is-at-the-provisioning-stage-identitypoolnotfound-indicates-that-the-required-identity-pool-could-not-be-located-taskalreadyrunningforprovisioningscheme-indicates-that-the-provisioning-scheme-already-has-another-task-running-hypervisorinmaintenancemode-indicates-that-the-hypervisor-is-not-available-for-normal-use-noavailablestorage-indicates-that-no-storage-is-available-for-the-hypervisor-noavailablenetwork-indicates-that-no-network-is-available-for-the-hypervisor-finalizing-indicates-that-the-task-is-finalizing-finished-indicates-that-the-task-is-complete-finishedwitherrors-indicates-that-the-task-is-complete-but-there-were-errors-specific-details-of-errors-are-included-with-each-failed-virtual-machine-removing-indicates-that-the-task-is-removing-virtual-machines-from-the-hypervisor-failed-the-job-failed-for-reasons-specified-in-taskstateinformation-canceled-indicates-that-the-task-was-stopped-by-user-intervention-using-stop-provtask-taskstateinformation-provides-more-detailed-information-about-the-current-task-state-virtualmachinestocreatecount-the-total-number-of-virtual-machines-that-the-task-is-trying-to-create-virtualmachinescreatedcount-the-number-of-virtual-machines-that-the-task-has-created-so-far-details-of-the-machines-that-were-created-are-in-the-createdvirtualmachines-parameter-virtualmachinescreationfailedcount-the-number-of-virtual-machines-that-the-task-has-failed-to-create-details-of-the-machines-that-were-not-created-are-in-the-failedvirtualmachines-parameter-failedvirtualmachines-adaccountname-the-domain-qualified-ad-account-name-of-the-machine-adaccountsid-the-ad-account-sid-of-the-machine-account-diagnosticinformation-a-collection-of-handled-error-states-which-caused-the-provisioning-to-fail-exceptiontype-the-type-of-exception-this-object-represents-message-the-exception-message-details-the-full-exception-content-including-stack-trace-innerexception-information-relating-to-any-contributing-error-state-status-statusadditionalinformation-vmid-the-virtual-machine-identifier-within-the-hypervisor-in-which-the-vm-resides-vmname-the-display-name-of-the-virtual-machine-within-the-hypervisor-in-which-the-vm-resides-createdvirtualmachines-see-failedvirtualmachines-for-details-of-the-object-parameters">System.Guid<br>    When the RunAsynchronously identifier is specified, this GUID is returned and provides the task identifier.<br>System.Management.Automation.PSCustomObject<br>    This object provides details of the task that was run and contains the following information:<br>        TaskId <Guid><br>            The identifier for the task that was performed.<br>        Active <Boolean><br>            Indicates whether the task is still processing or is complete.<br>        Host <string><br>            The name of the host on which the task is running or was run.<br>        DateStarted <DateTime><br>            The date and time that the task was initiated.<br>        Type <Citrix.XDInterServiceTypes.JobType><br>            The type of task. For newly provisioned VM tasks, this is always "NewVirtualMachine".<br>        Metadata <Citrix.MachineCreation.Sdk.Metadata[]><br>            The list of metadata stored against the task. For new tasks this is empty until metadata is added.<br>        WorkflowStatus <System.Workflow.Runtime.WorkflowStatus><br>            Indicates the status of the workflow that is used to process the task.<br>        ProvisioningSchemeName <string><br>            The name of the provisioning scheme that the task was for.<br>        ProvisioningSchemeUid <Guid><br>            The unique identifier of the provisioning scheme that the task was for.<br>        MasterImage <string><br>            The path (in the hosting unit provider) of the virtual machine snapshot that was used as the master image for the task.<br>        IdentityPoolName <string><br>            The name of the identity pool (from the ADIdentity PowerShell snap-in) that the new provisioning scheme uses.<br>        IdentityPoolUid <guid><br>            The unique identifier name of the identity pool (from the ADIdentity PowerShell snap-in) that the new provisioning scheme uses.<br>        HostingUnitName <string><br>            The name of the hosting unit (from the Hosting Unit PowerShell snap-in) that the new provisioning scheme uses.<br>        HostingUnitUid<br>            The unique identifier of the hosting unit (from the Hosting Unit PowerShell snap-in) that the new provisioning scheme uses.<br>        TaskState <Citrix.DesktopUpdateManager.SDK.ProvisionVMState><br>            The state of the task.  This can be any of the following:<br>            Processing<br>                Indicates that the task is in its initial state.<br>            LocatingResources,<br>                Indicates that the task is locating information from other services.<br>            HostingUnitNotFound<br>                Indicates that the required hosting unit could not be located.<br>            ProvisioningSchemeNotFound<br>                Indicates that the required provisioning scheme could not be located.<br>            Provisioning<br>                Indicates that the task is at the provisioning stage.<br>            IdentityPoolNotFound<br>                Indicates that the required identity pool could not be located.<br>            TaskAlreadyRunningForProvisioningScheme<br>                Indicates that the provisioning scheme already has another task running.<br>            HypervisorInMaintenanceMode<br>                Indicates that the hypervisor is not available for normal use.<br>            NoAvailableStorage<br>                Indicates that no storage is available for the hypervisor.<br>            NoAvailableNetwork<br>                Indicates that no network is available for the hypervisor.<br>            Finalizing<br>                Indicates that the task is finalizing.<br>            Finished<br>                Indicates that the task is complete.<br>            FinishedWithErrors<br>                Indicates that the task is complete but there were errors. Specific details of errors are included with each failed virtual machine.<br>            Removing<br>                Indicates that the task is removing virtual machines from the hypervisor.<br>            Failed<br>                The job failed for reasons specified in TaskStateInformation.<br>            Canceled<br>                Indicates that the task was stopped by user intervention (using Stop-ProvTask).<br>        TaskStateInformation<br>            Provides more detailed information about the current task state.<br>        VirtualMachinesToCreateCount <int><br>            The total number of virtual machines that the task is trying to create.<br>        VirtualMachinesCreatedCount <int><br>            The number of virtual machines that the task has created so far. Details of the machines that were created are in the CreatedVirtualMachines parameter.<br>        VirtualMachinesCreationFailedCount <int><br>            The number of virtual machines that the task has failed to create. Details of the machines that were not created are in the FailedVirtualMachines parameter.<br>        FailedVirtualMachines <Citrix.DesktopUpdateManager.SDK.VirtualMachineCreation[]><br>            ADAccountName <string><br>                The domain qualified AD Account name of the machine.<br>            ADAccountSid <string><br>                The AD account SID of the machine account.<br>            DiagnosticInformation <Citrix.MachineCreation.Sdk.ExceptionSurrogate[]><br>                A collection of handled error states which caused the provisioning to fail.<br>                    ExceptionType <string><br>                      The type of exception this object represents<br>                    Message  <string><br>                      The exception message<br>                    Details  <string><br>                      The full exception content including stack trace<br>                    InnerException <Citrix.MachineCreation.Sdk.ExceptionSurrogate><br>                      Information relating to any contributing error state<br>            Status <string><br>            StatusAdditionalInformation <string><br>            VMId <string><br>                The virtual machine identifier within the hypervisor in which the VM resides.<br>            VMName <string><br>                The display name of the virtual machine within the hypervisor in which the VM resides.<br>        CreatedVirtualMachines <Citrix.DesktopUpdateManager.SDK.VirtualMachineCreation[]><br>            See FailedVirtualMachines for details of the object parameters.</a></h3>
<p>## Notes
   Only one long-running task in each provisioning scheme can be processed at a time.<br>    In the case of failure, the following errors can result.<br>    Error Codes<br>    -----------<br>    JobCreationFailed<br>    The requested task could not be started.<br>    DatabaseError<br>    An error occurred in the service while attempting a database operation.<br>    DatabaseNotConfigured<br>    The operation could not be completed because the database for the service is not configured.<br>    ServiceStatusInvalidDb<br>    An error occurred in the service while attempting a database operation. Communication with the database failed<br>    for various reasons.<br>    WorkflowHostUnavailable<br>    The task could not be started because the database connection is inactive.<br>    PermissionDenied<br>    The user does not have administrative rights to perform this operation.<br>    ConfigurationLoggingError<br>    The operation could not be performed because of a configuration logging error<br>    CommunicationError<br>    An error occurred while communicating with the service.<br>    InvalidParameterCombination<br>    Both PurgeJobOnSuccess and RunAsynchronously were specified.<br>    When running asynchronously, the cmdlet terminates before the job does,<br>    so it cannot clean up the completed job.<br>    PermissionDenied<br>    The user does not have administrative rights to perform this operation.<br>    ExceptionThrown<br>    An unexpected error occurred. To locate more details, see the Windows event logs<br>    on the controller being used, or examine the XenDesktop logs.<br>    The cmdlet is associated with a task of type NewVirtualMachine, and while active will move through the following operations (CurrentOperation field)<br>    ValidatingInputs<br>    CreatingVirtualMachines<br>    ReleasingAccountLocks</p>
<h2 id="examples"><a class="toclink" href="#examples">Examples</a></h2>
<h3 id="example-1"><a class="toclink" href="#example-1">EXAMPLE 1</a></h3>
<div class="codehilite"><pre><span></span>C:\PS&gt;New-provVM -ProvisioningSchemeName MyScheme -ADAccountName &quot;domain\Account&quot;

TaskId                             : 4b49f13a-277c-4cb0-bc40-f088430cfe8a
Active                             : False
Host                               : DUMTESTDDC
DateStarted                        : 18/05/2010 10:54:32
Type                               : NewVirtualMachine
Metadata                           : {}
WorkflowStatus                     : Completed
MasterImage                        : /Base.vm/Base.snapshot
ProvisioningSchemeName             : MyScheme
ProvisioningSchemeUid              : 7585f0de-192e-4847-a6d8-22713c3a2f42
CurrentOperation                   :
TaskState                          : Finished
TaskStateInformation               :
HostingUnitUid                     : 01a4a008-8ce8-4165-ba9c-cdf15a6b0501
HostingUnitName                    : XenHU
IdentityPoolUid                    : 03743136-e43b-4a87-af74-ab71686b3c16
IdentityPoolName                   : idPool1
VirtualMachinesToCreateCount       : 1
VirtualMachinesCreatedCount        : 1
VirtualMachinesCreationFailedCount : 0
CreatedVirtualMachines             : {DOMAIN\Account$}
FailedVirtualMachines              : {}
ProvisioningJob                    : 6fa5dc7c-6d49-4616-8682-aeb1580866b3
ProvisioningStatus                 : Completed
</pre></div>


<p>Description<br>-----------<br>Creates a new virtual machine using the AD account "domain\account" in the provisioning scheme "MyScheme".</p>
<h3 id="example-2"><a class="toclink" href="#example-2">EXAMPLE 2</a></h3>
<div class="codehilite"><pre><span></span>C:\PS&gt;New-provVM -ProvisioningSchemeName MyScheme -ADAccountName &quot;domain\Account&quot; -RunAsynchronously

Guid
----
6dd85fec-96cf-46b1-9cd4-d8ba7d06e85b
</pre></div>


<p>Description<br>-----------<br>Creates a new virtual machine using the AD account "domain\account" in the provisioning scheme "MyScheme" asynchronously. To get the task details, use Get-ProvTask -TaskID <task id><br>i.e.<br>C:\PS&gt;Get-ProvTask -TaskID 6dd85fec-96cf-46b1-9cd4-d8ba7d06e85b<br>TaskId                             : 4b49f13a-277c-4cb0-bc40-f088430cfe8a<br>Active                             : False<br>Host                               : MyHost<br>DateStarted                        : 18/05/2010 10:54:32<br>Type                               : NewVirtualMachine<br>Metadata                           : {}<br>WorkflowStatus                     : Completed<br>MasterImage                        : /Base.vm/Base.snapshot<br>ProvisioningSchemeName             : MyScheme<br>ProvisioningSchemeUid              : 7585f0de-192e-4847-a6d8-22713c3a2f42<br>TaskState                          : Finished<br>TaskStateInformation               :<br>HostingUnitUid                     : 01a4a008-8ce8-4165-ba9c-cdf15a6b0501<br>HostingUnitName                    : XenHU<br>IdentityPoolUid                    : 03743136-e43b-4a87-af74-ab71686b3c16<br>IdentityPoolName                   : idPool1<br>VirtualMachinesToCreateCount       : 1<br>VirtualMachinesCreatedCount        : 1<br>VirtualMachinesCreationFailedCount : 0<br>CreatedVirtualMachines             : {DOMAIN\Account$}<br>FailedVirtualMachines              : {}<br>ProvisioningJob                    : 6fa5dc7c-6d49-4616-8682-aeb1580866b3<br>ProvisioningStatus                 : Completed</p>
<h3 id="example-3"><a class="toclink" href="#example-3">EXAMPLE 3</a></h3>
<div class="codehilite"><pre><span></span><span class="x">C:\PS&gt;</span><span class="p">$</span><span class="nv">accounts</span><span class="x"> = Get-AcctAdAccount -IdentityPool MyPool -State Available</span>
<span class="x">C:\PS&gt;New-provVM -ProvisioningSchemeName MyScheme -ADAccountName </span><span class="p">$</span><span class="nv">t</span><span class="x"> -RunAsyncronously</span>
</pre></div>


<p>Description<br>-----------<br>Creates a new virtual machine using all of the available AD accounts from the identity pool "MyPool" in the provisioning scheme "MyScheme" asynchronously. To get the task details, use Get-ProvTask -TaskID <task id><br>For example:<br>C:\PS&gt;Get-ProvTask -TaskID 6dd85fec-96cf-46b1-9cd4-d8ba7d06e85b<br>TaskId                             : 4b49f13a-277c-4cb0-bc40-f088430cfe8a<br>Active                             : False<br>Host                               : MyHost<br>DateStarted                        : 18/05/2010 10:54:32<br>Type                               : NewVirtualMachine<br>Metadata                           : {}<br>WorkflowStatus                     : Completed<br>MasterImage                        : /Base.vm/Base.snapshot<br>ProvisioningSchemeName             : MyScheme<br>ProvisioningSchemeUid              : 7585f0de-192e-4847-a6d8-22713c3a2f42<br>TaskState                          : Finished<br>TaskStateInformation               :<br>HostingUnitUid                     : 01a4a008-8ce8-4165-ba9c-cdf15a6b0501<br>HostingUnitName                    : XenHU<br>IdentityPoolUid                    : 03743136-e43b-4a87-af74-ab71686b3c16<br>IdentityPoolName                   : idPool1<br>VirtualMachinesToCreateCount       : 1<br>VirtualMachinesCreatedCount        : 1<br>VirtualMachinesCreationFailedCount : 0<br>CreatedVirtualMachines             : {DOMAIN\Account$}<br>FailedVirtualMachines              : {}<br>ProvisioningJob                    : 6fa5dc7c-6d49-4616-8682-aeb1580866b3<br>ProvisioningStatus                 : Completed</p>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../New-ProvScheme/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../Publish-ProvMasterVMImage/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
